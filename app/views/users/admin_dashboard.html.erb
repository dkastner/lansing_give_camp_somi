<h1>Administration dashboard</h1>

<h2>Actions</h2>
<ul>
	<li><%= link_to "Add event", :controller=> 'events', :action => 'new' %></li>
	<li><%= link_to "Manage news items", :controller=> 'news_items', :action => 'index' %></li>
	<li><%= link_to "Manage fund raising items", :controller=> 'fund_raisings', :action => 'index' %></li>
</ul>

<h2>Upcoming events</h2>
<table class="dashboard">
<tr>
	<th></th>
	<th>Title</th>
	<th>Date</th>
	<th>Location</th>
	<th>Vol</th>
	<th>(Min/Max)</th>
	<th></th>
	<th></th>
	<th></th>
</tr>

<% @upcoming_events.each do |event| %>
  <tr <% if event.users.count < event.minimum_volunteers %>class="yellow"<% end %><% if event.users.count >= event.maximum_volunteers %>class="full"<% end %>>
  	<td class="status_cell"><% if event.users.count >= event.maximum_volunteers %>Full<% end %><% if event.users.count < event.minimum_volunteers %>Under<% end %></td>
    <td><%=h event.title %></td>
	<td><%=h event.date.strftime("%m/%d/%Y %I:%M %p") %></td>
	<td><%=h event.location %></td>
	<td><%=event.users.count%></td>
	<td>(<%= link_to "#{event.minimum_volunteers} / #{event.maximum_volunteers}", :controller => 'event_volunteer', :action => 'index', :id => event.id %>)</td>
    <td><%= link_to 'View', event %></td>
    <td><%= link_to 'Edit', edit_event_path(event) %></td>
    <td><%= link_to 'Delete', event, :confirm => 'Are you sure you want to delete this event?', :method => :delete %></td>
  </tr>
<% end %>
</table>
<br />
<h2>Past events</h2>
<table class="dashboard">
<tr>
	<th></th>
	<th>Title</th>
	<th>Date</th>
	<th>Location</th>
	<th>Vol</th>
	<th>(Min/Max)</th>
	<th></th>
	<th></th>
	<th></th>
</tr>

<% @past_events.each do |event| %>
  <tr <% if event.users.count < event.minimum_volunteers %>class="yellow"<% end %><% if event.users.count >= event.maximum_volunteers %>class="full"<% end %>>
  	<td class="status_cell"><% if event.users.count >= event.maximum_volunteers %>Full<% end %><% if event.users.count < event.minimum_volunteers %>Under<% end %></td>
    <td><%=h event.title %></td>
	<td><%=h event.date.strftime("%m/%d/%Y %I:%M %p") %></td>
	<td><%=h event.location %></td>
	<td><%=event.users.count%></td>
	<td>(<%=event.minimum_volunteers%>/<%=event.maximum_volunteers%>)</td>
    <td><%= link_to 'View', event %></td>
    <td><%= link_to 'Edit', edit_event_path(event) %></td>
    <td><%= link_to 'Delete', event, :confirm => 'Are you sure you want to delete this event?', :method => :delete %></td>
  </tr>
<% end %>
</table>
<ul>
